{% extends 'base.html' %}

{% block title %}
    Редактирование перевода {{ title|safe }}
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-lg-12" style="margin-bottom: 8px;">
            <h3><a href="/">Главная</a>&nbsp;&#47; Профиль&nbsp;{{ username }}&nbsp;&#47; Редактирование перевода {{ title|safe }}</h3>
        </div>
    </div>

    <div id="delete-chapter-popup" class="white-popup-block mfp-hide">
        <h3>Действительно удалить раздел?</h3>
        <p id="delete-chapter-popup-additional-text"></p>
        <p><a class="popup-modal-dismiss" href="#">Отмена</a></p>
    </div>

    <table class="table table-hover table-sm">
        <thead>
            <tr>
            <th class="col-md-11 col-sm-10 small-td-padding">Название</th>
            <th class="col-md-1 col-sm-2 small-td-padding">#</th>
            </tr>
        </thead>
        <tbody>
            {% for item in statistics %}
                <tr class="translation-chapter-collapsed"
                    data_translated="{{ item.translated }}"
                    data_total_rows="{{ item.total_rows }}"
                    data_edited_first_pass="{{ item.edited_first_pass }}"
                    data_edited_second_pass="{{ item.edited_second_pass }}"
                    data_name="{{ item.name|safe }}"
                    data_is_chapter="{{ item.is_chapter }}"
                    data_script_title="{{ item.script_title }}"
                    data_title="{{ item.title }}"
                    data_translation_item="{{ item.translation_item }}"
                    data_id="{{ item.id }}"
                    data_alias="{{ alias }}">
                    {% if item.is_editable %}
                        <td class="small-td-padding item_name">{{ item.name|safe }}</td>
                        <td class="small-td-padding">
                            <a href="#" class="translation-chapter-edit translation-chapter-pin"><span class="glyphicon glyphicon-edit"></span></a>
                            <a href="#delete-chapter-popup" class="translation-chapter-delete-popup translation-chapter-pin"><span class="glyphicon glyphicon-remove"></span></a>
                        </td>
                    {% else %}
                        <td class="small-td-padding">
                            {{ item.name|safe }}<br /><br />
                            <span class="monospaced">
                                Всего строк&nbsp;: {{ item.total_rows|safe }}<br />
                                Перевод&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: {{ item.translated|safe }}<br />
                                Редактура&nbsp;1&nbsp;: {{ item.edited_first_pass|safe }}<br />
                                Редактура&nbsp;2&nbsp;: {{ item.edited_second_pass|safe }}
                            </span>
                        </td>
                        <td class="small-td-padding"></td>
                    {% endif %}
                </tr>
            {% endfor %}
            <tr class="add-row-collapsed"
                data_is_chapter="False"
                data_translation_item="{{ translation_item }}">
                <td><a href="#" class="add-chapter">Добавить главу</a></td>
                <td></td>
            </tr>
            <tr class="add-row-collapsed"
                data_is_chapter="True"
                data_translation_item="{{ translation_item }}">
                <td><a href="#" class="add-chapter">Добавить подраздел</a></td>
                <td></td>
            </tr>
            <tr class="editing-row-hidden editing-row-example">
                {% include "translation/chapter_edit_form_header.html" %}
                {% include "translation/chapter_edit_form.html" %}
                {% include "translation/chapter_edit_form_footer.html" %}
                {% include "translation/chapter_edit_buttons.html" %}
            </tr>
            <tr class="editing-row-hidden editing-row-example-chapter">
                {% include "translation/chapter_edit_form_header.html" %}
                {% include "translation/chapter_edit_form_footer.html" %}
                {% include "translation/chapter_edit_buttons.html" %}
            </tr>
            <tr class="editing-row-hidden collapsed-row-example">
                {% include "translation/chapter_collapsed.html" %}
            </tr>
            <tr class="editing-row-hidden add-chapter-example">
                {% include "translation/chapter_edit_form_header.html" %}
                {% include "translation/chapter_edit_form.html" %}
                {% include "translation/chapter_edit_form_footer.html" %}
                {% include "translation/chapter_add_buttons.html" %}
            </tr>
            <tr class="editing-row-hidden add-section-example">
                {% include "translation/chapter_edit_form_header.html" %}
                {% include "translation/chapter_edit_form_footer.html" %}
                {% include "translation/chapter_add_buttons.html" %}
            </tr>
            <tr class="editing-row-hidden add-row-collapsed add-chapter-text-example"
                data_is_chapter="False"
                data_translation_item="{{ translation_item }}">
                <td><a href="#" class="add-chapter">Добавить главу</a></td>
                <td></td>
            </tr>
            <tr class="editing-row-hidden add-row-collapsed add-section-text-example"
                data_is_chapter="True"
                data_translation_item="{{ translation_item }}">
                <td><a href="#" class="add-chapter">Добавить подраздел</a></td>
                <td></td>
            </tr>
        </tbody>
    </table>

    <div class="form-group">
        <label for="pictures_statistics">Изображения</label>
        <div class="input-group">
            <textarea id="pictures_statistics" class="form-control">{{ pictures_statistics }}</textarea>
            <a class="input-group-addon btn btn-default" href="#"><span class="glyphicon glyphicon-floppy-disk"></span></a>
        </div>
    </div>

    <div class="form-group">
        <label for="technical_statistics">Тех. часть</label>
        <div class="input-group">
            <textarea id="technical_statistics" class="form-control">{{ technical_statistics }}</textarea>
            <a class="input-group-addon btn btn-default" href="#"><span class="glyphicon glyphicon-floppy-disk"></span></a>
        </div>
    </div>

    <div class="form-group">
        <label for="comment">Комментарий</label>
        <div class="input-group">
            <textarea id="comment" class="form-control">{{ comment }}</textarea>
            <a class="input-group-addon btn btn-default" href="#"><span class="glyphicon glyphicon-floppy-disk"></span></a>
        </div>
    </div>

{% endblock %}
